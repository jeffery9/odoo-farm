<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- 1. Product/Lot Label Template (Small) -->
    <template id="report_agri_lot_label">
        <t t-call="web.basic_layout">
            <div class="page">
                <t t-foreach="docs" t-as="lot">
                    <t t-set="bg_img" t-value="res_company.label_background_image"/>
                    <div t-attf-style="width: 100mm; height: 50mm; border: 1px solid black; padding: 5mm; margin-bottom: 5mm; page-break-inside: avoid; position: relative; #{bg_img ? 'background-image: url(data:image/png;base64,' + bg_img.decode() + '); background-size: cover;' : ''}">
                        <div class="row">
                            <div class="col-8">
                                <h3 t-field="lot.product_id.name" style="margin-top: 0;"/>
                                <div><strong>Lot:</strong> <span t-field="lot.name"/></div>
                                <div><strong>Grade:</strong> <span t-field="lot.quality_grade"/></div>
                                <div><strong>Date:</strong> <span t-field="lot.create_date" t-options='{"widget": "date"}'/></div>
                                <div t-if="lot.expiration_date"><strong>Expiry:</strong> <span t-field="lot.expiration_date" t-options='{"widget": "date"}'/></div>
                            </div>
                            <div class="col-4 text-center">
                                <img t-if="lot.traceability_url" t-att-src="'/report/barcode/?barcode_type=QR&amp;value=%s&amp;width=120&amp;height=120' % lot.get_qr_quoted_traceability_url()" style="width:30mm;height:30mm;"/>
                                <div style="font-size: 8px;">Scan for Story</div>
                            </div>
                        </div>
                    </div>
                </t>
            </div>
        </t>
    </template>

    <!-- 2. Land Parcel / Location Sign (Large) -->
    <template id="report_land_parcel_sign">
        <t t-call="web.basic_layout">
            <div class="page">
                <t t-foreach="docs" t-as="loc">
                    <t t-set="bg_img" t-value="res_company.label_background_image"/>
                    <div t-attf-style="width: 150mm; height: 100mm; border: 2px solid green; padding: 10mm; margin-bottom: 10mm; page-break-inside: avoid; border-radius: 5mm; position: relative; #{bg_img ? 'background-image: url(data:image/png;base64,' + bg_img.decode() + '); background-size: cover;' : ''}">
                        <div class="text-center">
                            <h1 style="color: green;" t-field="loc.name"/>
                            <hr/>
                        </div>
                        <div class="row">
                            <div class="col-7">
                                <h4>Parcel Details</h4>
                                <p><strong>Area:</strong> <span t-field="loc.land_area"/> <span t-field="loc.land_area_uom_id"/></p>
                                <p><strong>Soil:</strong> <span t-field="loc.soil_type"/></p>
                                <p><strong>Latest pH:</strong> <span t-field="loc.latest_ph"/></p>
                                <p><strong>Coordinates:</strong> <span t-field="loc.gps_lat"/>, <span t-field="loc.gps_lng"/></p>
                            </div>
                            <div class="col-5 text-center">
                                <img t-att-src="'/report/barcode/?barcode_type=QR&amp;value=%s&amp;width=200&amp;height=200' % loc.get_qr_quoted_name()" style="width:40mm;height:40mm;"/>
                                <div>Location ID</div>
                            </div>
                        </div>
                    </div>
                </t>
            </div>
        </t>
    </template>

    <!-- 3. Animal Ear Tag (Micro) -->
    <template id="report_animal_tag">
        <t t-call="web.basic_layout">
            <div class="page">
                <t t-foreach="docs" t-as="lot">
                    <t t-set="bg_img" t-value="res_company.label_background_image"/>
                    <div t-attf-style="width: 40mm; height: 30mm; border: 1px solid #ccc; padding: 2mm; text-align: center; border-radius: 3mm; display: inline-block; margin: 2mm; position: relative; #{bg_img ? 'background-image: url(data:image/png;base64,' + bg_img.decode() + '); background-size: cover;' : ''}">
                        <div style="font-weight: bold; font-size: 14px;" t-field="lot.identification_number or lot.name"/>
                        <div style="font-size: 10px;" t-field="lot.product_id.agri_variety"/>
                        <div style="margin-top: 2mm;">
                            <img t-att-src="'/report/barcode/?barcode_type=Code128&amp;value=%s&amp;width=120&amp;height=30' % lot.name" style="width:35mm;height:10mm;"/>
                        </div>
                    </div>
                </t>
            </div>
        </t>
    </template>

    <!-- 4. GB 7718 Food Label (Standard) -->
    <template id="report_gb7718_food_label">
        <t t-call="web.basic_layout">
            <div class="page">
                <t t-foreach="docs" t-as="lot">
                    <div style="width: 100mm; border: 1.5px solid #000; padding: 5mm; margin-bottom: 5mm; font-family: sans-serif; font-size: 10pt;">
                        <h2 t-field="lot.product_id.name" style="text-align: center; border-bottom: 1px solid #000; padding-bottom: 2mm;"/>
                        
                        <div class="row mt-2">
                            <div class="col-12">
                                <strong>Ingredients:</strong> <span t-field="lot.product_id.ingredient_list"/>
                            </div>
                        </div>
                        
                        <div class="row mt-1">
                            <div class="col-6"><strong>Net Content:</strong> <span t-field="lot.net_content"/></div>
                            <div class="col-6"><strong>Production Date:</strong> <span t-field="lot.create_date" t-options='{"widget": "date"}'/></div>
                        </div>

                        <div class="row mt-1">
                            <div class="col-6"><strong>Shelf Life:</strong> <span t-field="lot.product_id.shelf_life_days"/> Days</div>
                            <div class="col-6"><strong>Standard Code:</strong> <span t-field="lot.product_id.food_standard_code"/></div>
                        </div>

                        <div class="row mt-1">
                            <div class="col-12"><strong>Storage:</strong> <span t-field="lot.product_id.storage_condition"/></div>
                        </div>

                        <div class="row mt-1">
                            <div class="col-12"><strong>Producer:</strong> <span t-field="lot.producer_id.name"/></div>
                            <div class="col-12"><strong>License No:</strong> <span t-field="lot.product_id.production_license_no"/></div>
                        </div>

                        <div class="row mt-3">
                            <div class="col-8">
                                <strong>Batch No:</strong> <span t-field="lot.name"/><br/>
                                <img t-att-src="'/report/barcode/?barcode_type=Code128&amp;value=%s&amp;width=200&amp;height=30' % lot.name" style="width:50mm;height:8mm;"/>
                            </div>
                            <div class="col-4 text-center">
                                <img t-att-src="'/report/barcode/?barcode_type=QR&amp;value=%s&amp;width=100&amp;height=100' % lot.traceability_url" style="width:20mm;height:20mm;"/>
                                <div style="font-size: 7pt;">Trace Source</div>
                            </div>
                        </div>
                    </div>
                </t>
            </div>
        </t>
    </template>
</odoo>
